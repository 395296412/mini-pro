# FitPro 项目规范文档

## 架构设计

### 前端架构
- **技术栈**：uni-app + Vue 3 + Vant Weapp
- **状态管理**：Pinia
- **路由管理**：uni-app 内置路由

### 分层设计
- **视图层 (views)**：页面组件如 Login.vue, Welcome.vue
- **组件层 (components)**：可复用组件，分为基础组件和布局组件
- **状态层 (store)**：集中管理应用状态和业务逻辑
- **服务层 (service)**：处理 API 调用和数据交互
- **工具层 (utils)**：提供通用工具函数和 HTTP 拦截器
- **常量层 (constants)**：集中管理 URI、缓存键等

### 代码风格
#### 命名规范
- **组件名**：使用 PascalCase（如 CourseCard、CalendarBar）
- **文件名**：使用 PascalCase 或 kebab-case
- **变量名**：使用 camelCase
- **常量名**：使用 UPPER_CASE_WITH_UNDERSCORES（如 BASE_URL）

#### 代码组织
- **关注点分离**：UI 逻辑与业务逻辑分离
- **单一职责原则**：组件和函数专注于单一任务
- **可测试性**：逻辑与 UI 分离以便于单元测试

#### 样式管理
- **预处理器**：使用 SCSS
- **样式隔离**：组件样式使用 scoped 属性
- **样式变量**：在 variables.scss 中定义全局样式变量
- **混合器**：在 mixins.scss 中定义可复用样式混合器
- **原子类**：使用原子类如 flex-center, mr-xs 等

## 组件开发规范

### 组件设计原则
- **组件原子化**：将 UI 拆分为小型、可复用的组件
- **数据自上而下流动**：父组件通过 props 向子组件传递数据
- **事件自下而上传递**：子组件通过 emit 向父组件传递事件
- **避免硬编码文本**：使用常量或 i18n 配置管理文本内容
- **使用动态数据**：组件内部不应硬编码数据，而应从外部接收
- **样式复用**：优先使用项目中已有的原子类和 mixins

### 样式定制
- 使用项目的 mixins.scss 中定义的样式变量
- 通过 CSS 变量覆盖默认样式
- 保持与项目设计语言的一致性

### 组件优先级
- 优先使用 Vant 组件替代自定义基础组件
- 对于特殊需求，可以基于 Vant 组件进行二次封装

## 路由与 API 管理

### 路由管理
- **路由常量**：在 constants/routes.js 中定义
- **路由分组**：按功能模块分组（AUTH、COACH、STUDENT、COMMON）
- **路由元数据**：包含权限要求和页面标题

### API 管理
- **API URL 常量**：在 constants/routes.js 的 API_URLS 对象中定义
- **API 分组**：按功能模块分组（USER、CONTENT、SYSTEM）
- **完整路径构建**：使用 import.meta.env.VITE_API_BASE_URL + API_URLS.xxx 作为完整 API 路径

## 资源管理规范

### 代码复用原则
- **基础组件检查**：优先使用已有基础组件
- **公共资源利用**：复用公共样式、工具函数、常量定义
- **代码重复避免**：将可能重复使用的逻辑抽取为公共函数或组件

### 资源引用规则
- **审核现有资源**：检查项目中是否已存在相同或类似的资源
- **使用现有资源**：如果发现相同功能的资源，直接引用它
- **创建新资源流程**：只有在确认项目中不存在可复用资源后，才创建新资源
- **引用路径规范**：使用项目规定的引用路径格式（如 @/constants, @/components 等）

## 错误处理与性能优化

### 错误处理
- **统一错误处理**：通过 HTTP 响应拦截器
- **自动登录过期处理**：检测登录状态并重定向
- **错误消息防抖**：避免频繁显示相同错误消息

### 性能优化
- **按需加载组件**：减少初始加载时间
- **路由懒加载**：提高页面加载速度
- **集中状态管理**：减少不必要的重新渲染
- **硬件加速**：为动画添加硬件加速提高性能